{% extends 'barsys/with_sidebar_base.html' %}

{% load bootstrap3 %}

{% block bootstrap3_title %}User list{% endblock %}

{% block sidebar_content %}
    <li class="active"><a href="{% url 'user_list' %}">{% bootstrap_icon "home" extra_classes="pull-left" %}
        Home</a></li>
    <li><a href="#a">{% bootstrap_icon "shopping-cart" extra_classes="pull-left" %} MultiBuy </a></li>
    <li><a href="#a">{% bootstrap_icon "th-list" extra_classes="pull-left" %} Last purchases</a>
        <table class="table table-striped table-sidebar">
            <tbody>
            {% for purchase in last_purchases %}
                <tr>
                    <td class="td-small">{{ purchase.quantity }}x</td>
                    <td class="td-big">{{ purchase.product_name }} ({{ purchase.user.display_name }})</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </li>

    {% for stats_element in sidebar_stats_elements %}
        {% include 'barsys/snippets/sidebar_stats_element.html' with data=stats_element %}
    {% endfor %}
{% endblock %}

{% block main_content %}
    <h4><span class="glyphicon glyphicon-star" aria-hidden="true"></span></h4>
    <hr/>
    <div class="btn-group-horizontal">
        {% for user in favorites %}
            <a href="{% url 'user_purchase' user.id %}" class="btn btn-lg btn-default"
               style="width: 220px; margin-bottom: 10px;">{{ user.display_name }}</a>
        {% endfor %}
    </div>


    <h4><span class="glyphicon glyphicon-user" aria-hidden="true"></span> All users</h4>
    <hr/>
    <div class="btn-group-horizontal">
        {% for user in all_users %}
            <a href="{% url 'user_purchase' user.id %}" class="btn btn-lg btn-default"
               style="width: 220px; margin-bottom: 10px;">{{ user.display_name }}</a>
        {% endfor %}
    </div>
{% endblock %}

{% block extra_js %}
    <script type="text/javascript">
        function toggle_visibility(ids) {
            for (i = 0, len = ids.length; i < len; i++) {
                var e = document.getElementById(ids[i]);
                if (e.style.display == 'block') {
                    e.style.display = 'none';
                } else {
                    e.style.display = 'block';
                }
            }
        }
    </script>
{% endblock %}